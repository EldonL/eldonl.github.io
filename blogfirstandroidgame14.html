<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Android Game - Eldon Lin Portfolio</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/blogproject.css">
    <script src="js/app.js" defer></script>
    <script src="js/component/header.js" defer></script>
    <script src="js/component/footer.js" defer></script>
    <script src="js/component/logo.js" defer></script>
    <script src="js/component/blogintro.js" defer></script>
    <script src="js/component/blogcontent.js" defer></script>
    <script src="js/component/blogrecent.js" defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>

    <section class="bg-js-controlled">
        <header-component></header-component>
    </section>
    
    <section class="bg-js-controlled">
        <section class="intro">
            <blogintro-component>
                <span slot ="title">First Android Game - Part 14 - Syncing Levels</span>
                <span slot="date">Aug 10, 2023</span>
                <button slot="vlogbutton" onclick="OnLinkClick('https://youtu.be/_LgKzlqb2NA')">Watch on youtube</span>       
            </blogintro-component>
        </section>
    
    
            <section class="diarypost">
                <blogcontent-component>
                    <span slot ="action1text">This is part 14 of making my first Android Game. If you missed part13, you can find it <a href="blogfirstandroidgame13.html">here</a></span>
                    <span slot ="action2text">I want to have a way to sync the background images and level increase across the network. I only want the master client to send this. In ScoreManager.cs, I added back the AddLevel() function</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg.PNG" slot="action2image">
                    <span slot ="action3text">The AddLevel() function would call the RPC function called AddLevelRPC that increases the level text and invokes the event LevelIncreaseEvent. This event has the background change subscribed to it</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg1.PNG" slot="action3image">
                    <span slot ="action4text">To test if this works, in Update(), when I press "A" I would call the AddLevel() function</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg2.PNG" slot="action4image">
                    <span slot ="action5text">Since the photonview is needed and the ScoreManager.cs is attached to the ScoreBoard prefab, the prefab must be put into the resources folder</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg3.PNG" slot="action5image">
                    <span slot ="action6text">The scoreboard prefab has PhotonView component attached to it</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg4.PNG" slot="action6image">
                    <span slot ="action7text">To change the background, I am looping through an array. To make sure I don't get index out of range, I would do a check to see if spriteIndex has passed the sprite array count</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg5.PNG" slot="action7image">
                    <span slot ="action8text">Using the "A" key to test. The background changes, level increases, and it gets synced across the network</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/syncbg6.gif" slot="action8image">
                    <span slot ="action9text">Now I need to choose when to incrase a level. Level 2 occurs if 5 potato enemies gets destroyed. In ScoreManager, I created a int property called PotatoEnemyDestroyed that checks if 5 potato enemies get destroyed, then call AddLevel()</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/synclevel.PNG" slot="action9image">
                    <span slot ="action10text">The Enemy getting destroyed in EnemyBase.cs was modified so that there is a virtual EnemyDestroyed that will call EnemyDestroyedRPC function. The RPC function logic is the same as before where it spawns the explosion</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/synclevel1.PNG" slot="action10image">
                    <span slot ="action11text">The Enemy.cs that inherits from EnemyBase.cs will override EnemyDestroyed, in here I will set the property PotatoEnemyDestroyed to 1, so that the number of enemy destroyed will increase by 1</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/synclevel2.PNG" slot="action11image">
                    <span slot ="action12text">I uncommented Level2() and Level3() in EnemyCannonSpawnInstance.cs</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/synclevel3.PNG" slot="action12image">
                    <span slot ="action13text">Level2Routine() and Level3Routine() in EnemyCannonSpawnInstance.cs is modified so that I check if the anywhere in the list is null, since we destroy the enemy instead of disabling the enemy which was done when this game was only 1 player</span>
                    <img class="diarypostimage" src="images_videos/blog/FirstAndroidGame/synclevel4.PNG" slot="action13image">
                    <span slot ="action14text">Check out the youtube video button above to see the results! See the next blog part 15 <a href="blogfirstandroidgame15.html">here</a></span>

                    
                    
                                       
                </blogcontent-component>
            </section>

            <section class="blogrecent">
                <blogrecent-component>
                    <span slot="recentblogs">Recent blogs</span>
                    <span slot="seeallblogs"><a href="index.html#blog">See all blogs</a></span>
                </blogrecent-component>

            </section>
    </section>
    

 


    <section class="footer-section bg-js-controlled" id="contact">
        <footer-component></footer-component>
    </section>


    
    
</body>
</html>

